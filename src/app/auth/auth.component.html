<div class="login-bg">
  <div class="container-fluid">
    <div class="row page">
      <div class="col-7half" style="background-color: #e5e5e5">
        <div class="row" style="height: 60vh">
          <div class="login-img"></div>
        </div>
        <div class="row" style="margin-top: 75px">
          <div class="welcome">
            <div class="title pb-4">Organize. Distribute. Analyze.</div>
            <p class="text">
              Welcome to datanimbus.io, an intelligent API-first application
              productivity platform with data at its core. datanimbus.io enables
              business users to easily organize, analyze and distribute data. To
              access this portal, contact
              <a href="mailto:support@datanimbus.com">support@datanimbus.com</a>
            </p>
          </div>
        </div>
      </div>
      <div class="col-4half login-form">
        <div class="product clearfix pl-4">
          <span class="d-inline-block float-left logo"></span>
        </div>
        <div class="login-box">
          <label class="login-text">Login</label>
          <div class="sign-in">Welcome back! Login with your credentials</div>
          <div>
            <form [formGroup]="form">
              <div class="form-group">
                <label style="margin-top: 20px">Email</label>
                <input type="text" class="form-control form-control-lg input-text" formControlName="username"
                  id="username" #usernameControl placeholder="name@email.com" odpAutoFocus 
                  (blur)="onSubmit($event)" autocomplete="off"  (keyup.enter)="this.authType === 'azure' ? doAzureLogin() : doLogin()"/>
                <label style="margin-top: 20px" *ngIf="this.authType !== 'azure'">Password</label>
                <input type="password" class="form-control form-control-lg input-text" formControlName="password" *ngIf="this.authType !== 'azure'"
                  id="password" #password placeholder="xxxxxxxxx" (keyup.enter)="onSubmit($event)" />

                <!-- <a href="#" class="text-secondary">Forgot your Password?</a> -->
                <button type="button" class="btn btn-lg btn-primary input-text mt-4 form-button"
                (click)="this.authType === 'azure' ? doAzureLogin() : doLogin()" [disabled]="!(form.get('username').value && form.get('password').value)">
                  <span *ngIf="loader" class="fa fa-spinner fa-pulse mr-2"></span>
                  <span class="btn-text">Login{{this.authType === 'azure' ? ' with Azure' : ''}}</span>
                </button>
              </div>

              <div class="text-danger text-center">{{ message }}&nbsp;</div>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<ng-template #clearSessionModal>
  <div class="modal-body p-4">
    <div class="d-flex flex-column align-items-center my-5 px-4">
      <p class="font-16 font-weight-bold text-center">Old Session is Active</p>
      <p class="text-center text-secondary">
        You already have an active session.
        <ng-container *ngIf="rbacUserReloginAction === 'allow'">Logging in will invalidate all your previous session.
        </ng-container>
        <ng-container *ngIf="rbacUserReloginAction === 'deny'">Please contact you admistrator.</ng-container>
      </p>
    </div>
    <div class="d-flex align-items-center justify-content-end">
      <button type="button" class="btn btn-link" (click)="clearSessionModalRef.close(false)">
        Close
      </button>
      <button *ngIf="rbacUserReloginAction === 'allow'" type="button" class="btn btn-dark btm-min-width ml-3"
        (click)="clearSessionModalRef.close(true)">
        Continue
      </button>
    </div>
  </div>
</ng-template>